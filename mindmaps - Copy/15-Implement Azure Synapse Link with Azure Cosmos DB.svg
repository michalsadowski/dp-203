<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="636px" preserveAspectRatio="none" style="width:1447px;height:636px;background:#FFFFFF;" version="1.1" viewBox="0 0 1447 636" width="1447px" zoomAndPan="magnify"><defs/><g><rect fill="#091F2C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:3.0;" width="105" x="10" y="298.2148"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="20" y="322.748">Synapse Link</text><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="138" x="165" y="69.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="175" y="94.166">1) How to enable?</text><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="242" x="353" y="30.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="363" y="54.9473">Synapse Link in Azure Cosmos DB</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="288" x="648" y="25.5332">Use the Azure portal or Azure CLI, PowerShell</text><path d="M595,49.2188 L605,49.2188 C620,49.2188 620,19.8047 635,19.8047 L645,19.8047 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="648" y="45.1426">Azure Cosmos DB for NoSQL</text><path d="M595,49.2188 L605,49.2188 C620,49.2188 620,39.4141 635,39.4141 L645,39.4141 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="648" y="64.752">Azure Cosmos DB for MongoDB</text><path d="M595,49.2188 L605,49.2188 C620,49.2188 620,59.0234 635,59.0234 L645,59.0234 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="648" y="84.3613">Azure Cosmos DB for Apache Gremlin (preview)</text><path d="M595,49.2188 L605,49.2188 C620,49.2188 620,78.6328 635,78.6328 L645,78.6328 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M303,88.4375 L313,88.4375 C328,88.4375 328,49.2188 343,49.2188 L353,49.2188 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><rect fill="#FFB900" height="37.6094" rx="12.5" ry="12.5" style="stroke:#FFB900;stroke-width:3.0;" width="119" x="353" y="108.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="363" y="133.3848">Considerations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="525" y="103.9707">You can't disable it</text><path d="M472,127.6563 L482,127.6563 C497,127.6563 497,98.2422 512,98.2422 L522,98.2422 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="525" y="123.5801">Choose which container to enable</text><path d="M472,127.6563 L482,127.6563 C497,127.6563 497,117.8516 512,117.8516 L522,117.8516 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="317" x="525" y="143.1895">Schema Type: WellDefined (default) or FullFidelity</text><path d="M472,127.6563 L482,127.6563 C497,127.6563 497,137.4609 512,137.4609 L522,137.4609 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="381" x="525" y="162.7988">After a schema type has been assigned, you can't change it.</text><path d="M472,127.6563 L482,127.6563 C497,127.6563 497,157.0703 512,157.0703 L522,157.0703 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M303,88.4375 L313,88.4375 C328,88.4375 328,127.6563 343,127.6563 L353,127.6563 " fill="none" style="stroke:#FFB900;stroke-width:3.0;"/><path d="M115,317.0195 L125,317.0195 C140,317.0195 140,88.4375 155,88.4375 L165,88.4375 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="147" x="165" y="239.9961"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="175" y="264.5293">2) Create container</text><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="211" x="362" y="205.6797"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="372" y="230.2129">Analytical store schema types</text><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="103" x="623" y="176.875"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="633" y="201.4082">Well-defined</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="443" x="779" y="201.4082">The default schema type for an Azure Cosmos DB for NoSQL account.</text><path d="M726,195.6797 L736,195.6797 C751,195.6797 751,195.6797 766,195.6797 L776,195.6797 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M573,224.4844 L583,224.4844 C598,224.4844 598,195.6797 613,195.6797 L623,195.6797 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="91" x="623" y="234.4844"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="633" y="259.0176">Full fidelity</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="596" x="767" y="259.0176">The default (and only supported) schema type for an Azure Cosmos DB for MongoDB account.</text><path d="M714,253.2891 L724,253.2891 C739,253.2891 739,253.2891 754,253.2891 L764,253.2891 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M573,224.4844 L583,224.4844 C598,224.4844 598,253.2891 613,253.2891 L623,253.2891 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M312,258.8008 L322,258.8008 C337,258.8008 337,224.4844 352,224.4844 L362,224.4844 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><rect fill="#F4364C" height="37.6094" rx="12.5" ry="12.5" style="stroke:#F4364C;stroke-width:3.0;" width="119" x="362" y="297.6055"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="372" y="322.1387">Considerations</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="448" x="534" y="297.627">Analytical store support can't be disabled without deleting the container</text><path d="M481,316.4102 L491,316.4102 C506,316.4102 506,291.8984 521,291.8984 L531,291.8984 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="336" x="534" y="327.041">Disable the analytical store: set TTL value to 0 or null</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="236" x="923" y="317.2363">By no longer synchronizing new items</text><path d="M870,321.3125 L880,321.3125 C895,321.3125 895,311.5078 910,311.5078 L920,311.5078 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="923" y="336.8457">Deleting items already synchronized</text><path d="M870,321.3125 L880,321.3125 C895,321.3125 895,331.1172 910,331.1172 L920,331.1172 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M481,316.4102 L491,316.4102 C506,316.4102 506,321.3125 521,321.3125 L531,321.3125 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="313" x="534" y="346.6504">After TTL = 0, you can't re-enable analytical store</text><path d="M481,316.4102 L491,316.4102 C506,316.4102 506,340.9219 521,340.9219 L531,340.9219 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M312,258.8008 L322,258.8008 C337,258.8008 337,316.4102 352,316.4102 L362,316.4102 " fill="none" style="stroke:#F4364C;stroke-width:3.0;"/><path d="M115,317.0195 L125,317.0195 C140,317.0195 140,258.8008 155,258.8008 L165,258.8008 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="285" x="165" y="371.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="261" x="175" y="395.6738">3) Create a linked service for Cosmos DB</text><rect fill="#C5B4E3" height="37.6094" rx="12.5" ry="12.5" style="stroke:#C5B4E3;stroke-width:3.0;" width="168" x="500" y="371.1406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="510" y="395.6738">Authentication options:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="721" y="366.2598">Account key</text><path d="M668,389.9453 L678,389.9453 C693,389.9453 693,360.5313 708,360.5313 L718,360.5313 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="721" y="385.8691">Service Principal</text><path d="M668,389.9453 L678,389.9453 C693,389.9453 693,380.1406 708,380.1406 L718,380.1406 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220" x="721" y="405.4785">System Assigned Managed Identity</text><path d="M668,389.9453 L678,389.9453 C693,389.9453 693,399.75 708,399.75 L718,399.75 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="721" y="425.0879">User Managed Identity</text><path d="M668,389.9453 L678,389.9453 C693,389.9453 693,419.3594 708,419.3594 L718,419.3594 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M450,389.9453 L460,389.9453 C475,389.9453 475,389.9453 490,389.9453 L500,389.9453 " fill="none" style="stroke:#C5B4E3;stroke-width:3.0;"/><path d="M115,317.0195 L125,317.0195 C140,317.0195 140,389.9453 155,389.9453 L165,389.9453 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#E1D3C7" height="37.6094" rx="12.5" ry="12.5" style="stroke:#E1D3C7;stroke-width:3.0;" width="259" x="165" y="439.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="235" x="175" y="464.3066">4) Query Cosmos DB data with Spark</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="301" x="477" y="444.6973">Load into DF: spark.read.format("cosmos.olap")</text><path d="M424,458.5781 L434,458.5781 C449,458.5781 449,438.9688 464,438.9688 L474,438.9688 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="425" x="477" y="464.3066">Write dataframe to a Cosmos DBL: mydf.write.format("cosmos.oltp")</text><path d="M424,458.5781 L434,458.5781 C449,458.5781 449,458.5781 464,458.5781 L474,458.5781 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="477" y="483.916">Use Spark SQL to query Azure Cosmos DB</text><path d="M424,458.5781 L434,458.5781 C449,458.5781 449,478.1875 464,478.1875 L474,478.1875 " fill="none" style="stroke:#E1D3C7;stroke-width:3.0;"/><path d="M115,317.0195 L125,317.0195 C140,317.0195 140,458.5781 155,458.5781 L165,458.5781 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><rect fill="#07641D" height="37.6094" rx="12.5" ry="12.5" style="stroke:#07641D;stroke-width:3.0;" width="277" x="165" y="537.2109"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="175" y="561.7441">5) Query Cosmos DB with Synapse SQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="294" x="495" y="503.5254">Use OPENROWSET with an authentication key</text><path d="M442,556.0156 L452,556.0156 C467,556.0156 467,497.7969 482,497.7969 L492,497.7969 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="495" y="523.1348">Use OPENROWSET with a credential</text><path d="M442,556.0156 L452,556.0156 C467,556.0156 467,517.4063 482,517.4063 L492,517.4063 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="495" y="542.7441">Specify a schema</text><path d="M442,556.0156 L452,556.0156 C467,556.0156 467,537.0156 482,537.0156 L492,537.0156 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="495" y="562.3535">Creatw a view in a database</text><path d="M442,556.0156 L452,556.0156 C467,556.0156 467,556.625 482,556.625 L492,556.625 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><rect fill="#07641D" height="37.6094" rx="12.5" ry="12.5" style="stroke:#07641D;stroke-width:3.0;" width="281" x="492" y="576.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="502" y="600.9629">Considerations for Serverless SQL pools</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="554" x="826" y="582.3535">Provision your Azure Cosmos DB everything in the same region as serverless SQL pool.</text><path d="M773,595.2344 L783,595.2344 C798,595.2344 798,576.625 813,576.625 L823,576.625 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="605" x="826" y="601.9629">When working with string columns, use the OPENROWSET function with the explicit WITH clause</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="364" x="826" y="619.5723">and specify an appropriate data length for the string data.</text><path d="M773,595.2344 L783,595.2344 C798,595.2344 798,605.0391 813,605.0391 L823,605.0391 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><path d="M442,556.0156 L452,556.0156 C467,556.0156 467,595.2344 482,595.2344 L492,595.2344 " fill="none" style="stroke:#07641D;stroke-width:3.0;"/><path d="M115,317.0195 L125,317.0195 C140,317.0195 140,556.0156 155,556.0156 L165,556.0156 " fill="none" style="stroke:#181818;stroke-width:3.0;"/><!--MD5=[088bb2c5e5dbfa585503ccdd2e58a02a]
@startmindmap
<style>
:depth(0) {
    BackgroundColor #091f2c
    FontColor #ffffff
    LineThickness 3.0
}
.topic1 {
    BackgroundColor #ffb900
    LineColor #ffb900
    LineThickness 3.0
    FontColor #000000
}
.topic2 {
    BackgroundColor #f4364c
    LineColor #f4364c
    LineThickness 3.0
    FontColor #ffffff
}
.topic3 {
    BackgroundColor #c5b4e3
    LineColor #c5b4e3
    LineThickness 3.0
    FontColor #000000
}
.topic4 {
    BackgroundColor #e1d3c7
    LineColor #e1d3c7
    LineThickness 3.0
    FontColor #000000
}
.topic5 {
    BackgroundColor #07641d
    LineColor #07641d
    LineThickness 3.0
    FontColor #ffffff
}
</style>
+ Synapse Link
++ 1) How to enable? <<topic1>>
+++ Synapse Link in Azure Cosmos DB <<topic1>>
++++_ Use the Azure portal or Azure CLI, PowerShell
++++_ Azure Cosmos DB for NoSQL
++++_ Azure Cosmos DB for MongoDB
++++_ Azure Cosmos DB for Apache Gremlin (preview)
+++ Considerations <<topic1>>
++++_ You can't disable it
++++_ Choose which container to enable
++++_ Schema Type: WellDefined (default) or FullFidelity
++++_ After a schema type has been assigned, you can't change it.
++ 2) Create container <<topic2>>
+++ Analytical store schema types <<topic2>>
++++ Well-defined <<topic2>>
+++++_ The default schema type for an Azure Cosmos DB for NoSQL account.
++++ Full fidelity <<topic2>>
+++++_ The default (and only supported) schema type for an Azure Cosmos DB for MongoDB account.
+++ Considerations <<topic2>>
++++_ Analytical store support can't be disabled without deleting the container
++++_ Disable the analytical store: set TTL value to 0 or null
+++++_ By no longer synchronizing new items
+++++_ Deleting items already synchronized
++++_ After TTL = 0, you can't re-enable analytical store
++ 3) Create a linked service for Cosmos DB <<topic3>>
+++ Authentication options: <<topic3>>
++++_ Account key
++++_ Service Principal
++++_ System Assigned Managed Identity
++++_ User Managed Identity
++ 4) Query Cosmos DB data with Spark <<topic4>>
+++_ Load into DF: spark.read.format("cosmos.olap")
+++_ Write dataframe to a Cosmos DBL: mydf.write.format("cosmos.oltp")
+++_ Use Spark SQL to query Azure Cosmos DB
++ 5) Query Cosmos DB with Synapse SQL <<topic5>>
+++_ Use OPENROWSET with an authentication key
+++_ Use OPENROWSET with a credential
+++_ Specify a schema
+++_ Creatw a view in a database
+++ Considerations for Serverless SQL pools <<topic5>>
++++_ Provision your Azure Cosmos DB everything in the same region as serverless SQL pool.
++++_ When working with string columns, use the OPENROWSET function with the explicit WITH clause \nand specify an appropriate data length for the string data.
@endmindmap

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>